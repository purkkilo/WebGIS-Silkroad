(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207968"],{a0be:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",[i("v-col",[t.roads&&t.hotels?i("v-card",{staticStyle:{padding:"30px"},attrs:{id:"myMap",elevation:"20",dark:t.isDarkMode}},[i("p",[t._v(" Web app for showing cities along the silkroad, along with some hotel locations close to the cities ")]),i("v-btn",{attrs:{text:"",outlined:"",href:"https://github.com/purkkilo/WebGIS-Silkroad",target:"_blank"}},[i("v-icon",[t._v("mdi-github")]),t._v(" Github ")],1),i("l-map",{ref:"myMap",staticStyle:{height:"600px","z-index":"1"},attrs:{zoom:t.zoom,center:t.center,options:t.mapOptions},on:{"update:center":t.centerUpdate,"update:zoom":t.zoomUpdate,ready:function(e){return t.initMap()}}},[i("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}})],1),i("v-row",[i("v-col",[i("v-card-title",[i("v-icon",[t._v("mdi-information-variant")]),t._v(" Map info")],1),i("v-card-subtitle",[i("span",[i("v-icon",{attrs:{color:"blue darken-4"}},[t._v("mdi-crosshairs")]),t._v(" Center: ("+t._s(t.currentCenter.lat)+", "+t._s(t.currentCenter.lng)+")"),i("br"),i("v-icon",[t._v("mdi-mouse-move-vertical")]),t._v(" Mouse position: "+t._s(t.mousePosition)),i("br"),i("v-icon",[t._v("mdi-magnify-plus-outline")]),t._v(" Zoom: "+t._s(t.currentZoom)+" ")],1)])],1),i("v-col",[i("v-card-title",[i("v-icon",[t._v("mdi-information-variant")]),t._v(" Road info")],1),i("v-card-subtitle",[i("span",[i("v-icon",{attrs:{color:"grey darken-2"}},[t._v("mdi-road-variant")]),t._v(t._s(t.roads.length)+" roads"),i("br"),i("v-icon",{attrs:{color:"blue lighten-1"}},[t._v("mdi-city")]),t._v(t._s(t.cityCount)+" unique, "+t._s(t.cityCount+t.duplicateCount)+" total cities "),i("br"),t._v(" City info and coordinates fetched with leaflet-geosearch and OpenStreetMapProvider "),i("br"),t._v(" Hoteldata fetched from Google Places API ")],1)])],1)],1),i("v-card-actions",[i("v-row",[i("v-col",[i("v-btn",{attrs:{rounded:"",outlined:"",color:"blue"},on:{click:function(e){return t.toggleMarkers(!1)}}},[t.markersHidden?i("v-icon",[t._v("mdi-eye")]):i("v-icon",[t._v("mdi-eye-off")]),t._v(t._s(t.markersHidden?"Show cities":"Hide cities"))],1)],1),i("v-col",[i("v-btn",{attrs:{rounded:"",outlined:"",color:"blue darken-2"},on:{click:function(e){return t.toggleMarkers(!0)}}},[t.hotelMarkersHidden?i("v-icon",[t._v("mdi-eye")]):i("v-icon",[t._v("mdi-eye-off")]),t._v(t._s(t.hotelMarkersHidden?"Show hotels":"Hide hotels"))],1)],1),i("v-col",[i("v-btn",{attrs:{rounded:"",outlined:"",color:"blue darken-2"},on:{click:function(e){return t.map.flyTo([32.54681317351517,67.7821466853562],2)}}},[i("v-icon",{attrs:{color:"green"}},[t._v("mdi-restart")]),t._v("Reset map")],1)],1)],1),i("v-row",[i("v-col",[i("v-btn",{attrs:{text:"",small:"",rounded:"",outlined:"",color:"blue darken-2"},on:{click:function(e){return t.download(t.roads,"silkroadCityData.json","application/json",!0)}}},[i("v-icon",{attrs:{color:"green"}},[t._v("mdi-download")]),t._v("Download City Data")],1)],1),i("v-col",[i("v-btn",{attrs:{text:"",small:"",rounded:"",outlined:"",color:"blue darken-2"},on:{click:function(e){return t.download(t.hotels,"silkroadHotelData.json","application/json",!0)}}},[i("v-icon",{attrs:{color:"green"}},[t._v("mdi-download")]),t._v("Download Hotel Data")],1)],1)],1)],1)],1):t._e()],1)],1),i("v-row",[i("v-col",[t.roads?i("v-card",{attrs:{dark:t.isDarkMode,elevation:"20"}},[i("v-card-title",[t._v("Roads")]),i("v-data-table",{staticClass:"elevation-20",attrs:{headers:t.roadHeaders,items:t.roads,"item-key":"id","sort-by":"id"},scopedSlots:t._u([{key:"item.isHidden",fn:function(e){var a=e.item;return[i("v-btn",{attrs:{rounded:"",outlined:"",small:"",color:a.color},on:{click:function(e){return t.toggleLine(a.id)}}},[a.isHidden?i("v-icon",[t._v("mdi-eye")]):i("v-icon",[t._v("mdi-eye-off")]),t._v(t._s(a.isHidden?"Show":"Hide"))],1)]}}],null,!0)})],1):t._e()],1),i("v-col",[i("v-card",{attrs:{dark:t.isDarkMode,elevation:"20",id:"cities"}},[i("v-card-title",[t._v("Cities")]),i("v-data-table",{staticClass:"elevation-20",attrs:{headers:t.headers,items:t.cities,"item-key":"id","sort-by":"id",search:t.search,loading:!t.roads||!t.hotels},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-col",[i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.selected",fn:function(e){var a=e.item;return[i("v-btn",{attrs:{rounded:"",outlined:"",small:"",color:"blue"},on:{click:function(e){return t.focusOnCity(a.id)}}},[i("v-icon",[t._v("mdi-map-search")]),t._v("Focus")],1)]}},{key:"item.viewed",fn:function(e){var a=e.item;return[i("v-btn",{attrs:{rounded:"",outlined:"",small:"",color:"blue lighten-2"},on:{click:function(e){return t.viewCityData(a.id)}}},[i("v-icon",[t._v("mdi-text-box-search-outline")]),t._v("View")],1),i("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialog_city[a.id],callback:function(e){t.$set(t.dialog_city,a.id,e)},expression:"dialog_city[item.id]"}},[i("v-card",{attrs:{dark:t.isDarkMode}},[i("v-card-title",{class:{"text-h5 grey darken-3":t.isDarkMode,"text-h5 grey lighten-2":!t.isDarkMode}},[t._v(" "+t._s(a.name)+" ")]),i("v-card-text",[i("v-list",[i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"grey darken-2"}},[t._v("mdi-road-variant")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(a.road))])],1)],1),i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"grey darken-2"}},[t._v("mdi-crosshairs-gps")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(a.latlng))])],1)],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.$set(t.dialog_city,a.id,!1)}}},[t._v(" Close ")])],1)],1)],1)]}}],null,!0)})],1)],1)],1),i("v-row",[i("v-col",{attrs:{md:"3"}},[i("v-card",{staticStyle:{padding:"10px",background:"rgba(1,1,1,0.5)"},attrs:{dark:""}},[t._v(" Photo by "),i("a",{attrs:{href:"https://unsplash.com/@manuelmeurisse?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"}},[t._v("Manuel Meurisse")]),t._v(" on "),i("a",{attrs:{href:"https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"}},[t._v("Unsplash")])])],1)],1)],1)},n=[],o=i("1da1"),r=(i("96cf"),i("d3b7"),i("3ca3"),i("ddb0"),i("d81d"),i("99af"),i("159b"),i("7db0"),i("b0c0"),i("c740"),i("2b3d"),i("9861"),i("e11e")),s=i.n(r),c=(i("b24d"),{name:"Map",components:{},props:["isDarkMode"],data:function(){return{zoom:3,center:s.a.latLng(30.751277776257812,74.61914062500001),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:3,currentCenter:s.a.latLng(30.751277776257812,74.61914062500001),mapOptions:{zoomSnap:.5},showCityInfo:!1,dialog_city:{},map:null,roads:null,hotels:null,cityMarkers:[],hotelMarkers:[],cityCount:0,duplicateCount:0,pointList:[],roadLinesLayer:s.a.layerGroup(),roadLines:[],cities:[],headers:[{text:"Name",value:"name",align:"start"},{text:"Road",value:"road",align:"center"},{text:"Focus on map",value:"selected",align:"center",sortable:!1},{text:"View info",value:"viewed",align:"center",sortable:!1}],roadHeaders:[{text:"Name",value:"name",align:"start"},{text:"Cities",value:"cities.length",align:"center"},{text:"Show/Hide",value:"isHidden",align:"center",sortable:!1}],search:"",markersHidden:!1,hotelMarkersHidden:!1,google:null,hotelData:{cities:[]},mousePosition:"( 0, 0 )"}},mounted:function(){var t=this;document.title="WebGIS silkroad",i.e("chunk-2d0ae52b").then(i.t.bind(null,"0a26",3)).then((function(e){t.roads=e.roads})),i.e("chunk-2d20825c").then(i.t.bind(null,"a40c",3)).then((function(e){t.hotels=e.cities}))},methods:{initMap:function(){var t=this;this.map=this.$refs.myMap.mapObject,this.map.addEventListener("mousemove",(function(e){var i=Math.round(1e4*e.latlng.lat)/1e4,a=Math.round(1e4*e.latlng.lng)/1e4;t.mousePosition="( ".concat(i,", ").concat(a," )")})),this.populateMap()},zoomUpdate:function(t){this.currentZoom=t},centerUpdate:function(t){this.currentCenter=t},populateMap:function(){var t=this;this.cityCount=0,this.roads.forEach((function(e){t.pointList=[],e.cities.forEach((function(i){t.cities.find((function(t){return t.name===i.name}))?++t.duplicateCount:++t.cityCount,t.addCity(i,e.name),t.pointList.push([i.lat,i.lng]),t.showHotels(i)})),t.drawRoad(t.pointList,e)}))},addCity:function(t,e){var i=this.cities.length?this.cities[this.cities.length-1].id+1:0;this.cities.push({id:i,name:t.name,lat:t.lat,lng:t.lng,latlng:"".concat(t.lat,", ").concat(t.lng),road:e,selected:!1,viewed:!1}),this.addMarker([t.lat,t.lng],t.name,null)},addMarker:function(t,e,i){var a,n=this.cityMarkers.length?this.cityMarkers[this.cityMarkers.length-1].id+1:0,o=s.a.AwesomeMarkers.icon({icon:"city",prefix:"mdi",markerColor:"blue"}),r=s.a.icon({iconUrl:"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",shadowUrl:"https://maps.gstatic.com/mapfiles/place_api/icons/v1/png_71/lodging-71.png",iconSize:[20,20],shadowSize:[20,20]});i?(a=s.a.marker(t,{icon:r,iconSize:[15,15],shadowSize:[15,15]}),a.bindPopup("<h1>".concat(e,' <i class="blue--text mdi mdi-bed icon-white"></i></h1><p><b>').concat(t[0],", ").concat(t[1],'</b> <i class="mdi mdi-crosshairs-gps icon-white"></p>'),{closeButton:!0})):(a=s.a.marker(t,{icon:o,iconSize:[15,15],shadowSize:[15,15]}),a.bindPopup("<h1>".concat(e,' <i class="blue--text mdi mdi-city icon-white"></i></h1><p><b>').concat(t[0],", ").concat(t[1],'</b> <i class="mdi mdi-crosshairs-gps icon-white"></p>'),{closeButton:!0})),a.id=n,this.map.addLayer(a),i?this.hotelMarkers.push(a):this.cityMarkers.push(a)},drawRoad:function(t,e){var i=s.a.polyline(t,{color:e.color,weight:3,opacity:.5,smoothFactor:1});i.id=e.id,i.isHidden=!1,this.roadLines.push(i),this.roadLinesLayer.addLayer(i),i.bindPopup("<h1>".concat(e.name,' <i class="blue--text mdi mdi-road-variant icon-white"></i></h1><div class="headline">').concat(e.cities.length," cities</div>")).addTo(this.map)},toggleLine:function(t){var e=this.roadLines.findIndex((function(e){return e.id===t}));if(e>-1){var i=this.roadLines[e];i.isHidden?this.map.addLayer(this.roadLines[e]):this.map.removeLayer(this.roadLines[e]),i.isHidden=!i.isHidden;var a=this.roads.findIndex((function(e){return e.id===t}));if(a>-1){var n=this.roads[a];n.isHidden=!n.isHidden}}},toggleMarkers:function(t){var e=this;t?(this.hotelMarkersHidden?this.hotelMarkers.forEach((function(t){e.map.addLayer(t)})):this.hotelMarkers.forEach((function(t){e.map.removeLayer(t)})),this.hotelMarkersHidden=!this.hotelMarkersHidden):(this.markersHidden?this.cityMarkers.forEach((function(t){e.map.addLayer(t)})):this.cityMarkers.forEach((function(t){e.map.removeLayer(t)})),this.markersHidden=!this.markersHidden)},findCityFromArray:function(t){var e=this.cities.findIndex((function(e){return e.id===t}));return e>-1?this.cities[e]:null},focusOnCity:function(t){var e=this.findCityFromArray(t);e&&(this.$vuetify.goTo("#myMap"),this.map.flyTo([e.lat,e.lng],14))},viewCityData:function(t){var e=this.findCityFromArray(t);e&&(this.$set(this.dialog_city,t,!0),this.showCityInfo=!0)},showHotels:function(t){var e=this,i=this.hotels.findIndex((function(e){return e.name===t.name}));if(i>-1){var a=this.hotels[i].hotels;a.forEach((function(t){e.addMarker([t.lat,t.lng],t.name,!0)}))}},getHotels:function(t){var e=this;this.google.load().then((function(i){var a=new i.maps.Map(document.getElementById("map"),{center:s.a.latLng(t.lat,t.lng),zoom:15}),n=new i.maps.places.PlacesService(a),r={location:s.a.latLng(t.lat,t.lng),radius:1e5,type:["hotel"]};n.nearbySearch(r,function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(n,o){var r,s,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o==i.maps.places.PlacesServiceStatus.OK)if(n.length){for(r=[],s=n.length>3?3:n.length,c=0;c<s;c++)d={name:n[c].name,lat:n[c].geometry.location.lat(),lng:n[c].geometry.location.lng()},r.push(d);e.hotelData.cities.push({name:t.name,hotels:r})}else console.log("No results for: "+t.name);case 1:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}))},download:function(t,e,i,a){a&&(t=JSON.stringify(t));var n=document.createElement("a"),o=new Blob([t],{type:i});n.href=URL.createObjectURL(o),n.download=e,n.click()}}}),d=c,l=i("2877"),u=i("6544"),h=i.n(u),v=i("8336"),m=i("b0af"),p=i("99d9"),f=i("62ad"),g=i("a523"),y=i("8fea"),b=i("169a"),k=i("ce7e"),_=i("132d"),w=i("8860"),M=i("da13"),C=i("5d23"),x=i("34c3"),L=i("0fd9"),H=i("2fa4"),S=i("8654"),V=Object(l["a"])(d,a,n,!1,null,null,null);e["default"]=V.exports;h()(V,{VBtn:v["a"],VCard:m["a"],VCardActions:p["a"],VCardSubtitle:p["b"],VCardText:p["c"],VCardTitle:p["d"],VCol:f["a"],VContainer:g["a"],VDataTable:y["a"],VDialog:b["a"],VDivider:k["a"],VIcon:_["a"],VList:w["a"],VListItem:M["a"],VListItemContent:C["a"],VListItemIcon:x["a"],VListItemTitle:C["b"],VRow:L["a"],VSpacer:H["a"],VTextField:S["a"]})}}]);
//# sourceMappingURL=chunk-2d207968.71084a8d.js.map